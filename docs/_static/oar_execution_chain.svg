<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1027px" preserveAspectRatio="none" style="width:1288px;height:1027px;" version="1.1" viewBox="0 0 1288 1027" width="1288px" zoomAndPan="magnify"><defs><filter height="300%" id="fvcccani4ni30" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="1012.3125" style="stroke: #A80036; stroke-width: 1.0;" width="428" x="4" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="194.5" y="16.0669">Server</text><rect fill="#90EE90" height="1012.3125" style="stroke: #A80036; stroke-width: 1.0;" width="829" x="434" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="807" y="16.0669">Head Node</text><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="795.5859" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="29" y="116.4297"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="804.5859" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="95.5" y="116.4297"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="224.5" y="261.2266"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="360.5" y="898.0156"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="804.5859" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="489.5" y="116.4297"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="119.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="917" y="684.2188"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1090" y="713.3516"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1203" y="789.6172"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="179.6641" style="stroke: #000000; stroke-width: 2.0;" width="715" x="554" y="631.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="34" x2="34" y1="106.4297" y2="930.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="100" x2="100" y1="106.4297" y2="930.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="229" x2="229" y1="106.4297" y2="930.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="365" x2="365" y1="106.4297" y2="930.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="494" x2="494" y1="106.4297" y2="930.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="595" x2="595" y1="106.4297" y2="930.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="814.5" x2="814.5" y1="106.4297" y2="930.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="921.5" x2="921.5" y1="106.4297" y2="930.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1095" x2="1095" y1="106.4297" y2="930.0156"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1208" x2="1208" y1="106.4297" y2="930.0156"/><rect fill="#FEFECE" filter="url(#fvcccani4ni30)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="48" x="8" y="71.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="15" y="91.1279">Leon</text><rect fill="#FEFECE" filter="url(#fvcccani4ni30)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="48" x="8" y="929.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="15" y="949.0107">Leon</text><rect fill="#FEFECE" filter="url(#fvcccani4ni30)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="70" y="71.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="77" y="91.1279">Bipbip</text><rect fill="#FEFECE" filter="url(#fvcccani4ni30)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="70" y="929.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="77" y="949.0107">Bipbip</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="166" y="103.1279">Server's prologue</text><ellipse cx="229.5" cy="74.1328" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="225.5,62.1328,231.5,57.1328,229.5,62.1328,231.5,67.1328,225.5,62.1328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="166" y="942.0107">Server's prologue</text><ellipse cx="229.5" cy="961.3125" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="225.5,949.3125,231.5,944.3125,229.5,949.3125,231.5,954.3125,225.5,949.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="303" y="103.1279">Server's epilogue</text><ellipse cx="365.5" cy="74.1328" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="361.5,62.1328,367.5,57.1328,365.5,62.1328,367.5,67.1328,361.5,62.1328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="303" y="942.0107">Server's epilogue</text><ellipse cx="365.5" cy="961.3125" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="361.5,949.3125,367.5,944.3125,365.5,949.3125,367.5,954.3125,361.5,949.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="438" y="103.1279">dedicated sshd</text><ellipse cx="494.5" cy="74.1328" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="490.5,62.1328,496.5,57.1328,494.5,62.1328,496.5,67.1328,490.5,62.1328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="438" y="942.0107">dedicated sshd</text><ellipse cx="494.5" cy="961.3125" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="490.5,949.3125,496.5,944.3125,494.5,949.3125,496.5,954.3125,490.5,949.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="564" y="103.1279">oar user</text><ellipse cx="595.5" cy="33.1328" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M595.5,41.1328 L595.5,68.1328 M582.5,49.1328 L608.5,49.1328 M595.5,68.1328 L582.5,83.1328 M595.5,68.1328 L608.5,83.1328 " fill="none" filter="url(#fvcccani4ni30)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="564" y="942.0107">oar user</text><ellipse cx="595.5" cy="955.3125" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M595.5,963.3125 L595.5,990.3125 M582.5,971.3125 L608.5,971.3125 M595.5,990.3125 L582.5,1005.3125 M595.5,990.3125 L608.5,1005.3125 " fill="none" filter="url(#fvcccani4ni30)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="783.5" y="103.1279">job user</text><ellipse cx="814.5" cy="33.1328" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M814.5,41.1328 L814.5,68.1328 M801.5,49.1328 L827.5,49.1328 M814.5,68.1328 L801.5,83.1328 M814.5,68.1328 L827.5,83.1328 " fill="none" filter="url(#fvcccani4ni30)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="783.5" y="942.0107">job user</text><ellipse cx="814.5" cy="955.3125" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M814.5,963.3125 L814.5,990.3125 M801.5,971.3125 L827.5,971.3125 M814.5,990.3125 L801.5,1005.3125 M814.5,990.3125 L827.5,1005.3125 " fill="none" filter="url(#fvcccani4ni30)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="855.5" y="103.1279">OAREXEC process</text><ellipse cx="922" cy="74.1328" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="918,62.1328,924,57.1328,922,62.1328,924,67.1328,918,62.1328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="855.5" y="942.0107">OAREXEC process</text><ellipse cx="922" cy="961.3125" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="918,949.3125,924,944.3125,922,949.3125,924,954.3125,918,949.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="1043" y="103.1279">Job's prologue</text><ellipse cx="1095" cy="74.1328" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1091,62.1328,1097,57.1328,1095,62.1328,1097,67.1328,1091,62.1328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="1043" y="942.0107">Job's prologue</text><ellipse cx="1095" cy="961.3125" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1091,949.3125,1097,944.3125,1095,949.3125,1097,954.3125,1091,949.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="1157" y="103.1279">Job's epilogue</text><ellipse cx="1208" cy="74.1328" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1204,62.1328,1210,57.1328,1208,62.1328,1210,67.1328,1204,62.1328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="1157" y="942.0107">Job's epilogue</text><ellipse cx="1208" cy="961.3125" fill="#FEFECE" filter="url(#fvcccani4ni30)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1204,949.3125,1210,944.3125,1208,949.3125,1210,954.3125,1204,949.3125" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="795.5859" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="29" y="116.4297"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="804.5859" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="95.5" y="116.4297"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="224.5" y="261.2266"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="360.5" y="898.0156"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="804.5859" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="489.5" y="116.4297"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="119.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="917" y="684.2188"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1090" y="713.3516"/><rect fill="#FFFFFF" filter="url(#fvcccani4ni30)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1203" y="789.6172"/><path d="M528,121.4297 L528,161.4297 L658,161.4297 L658,131.4297 L648,121.4297 L528,121.4297 " fill="#FBFB77" filter="url(#fvcccani4ni30)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M648,121.4297 L648,131.4297 L658,131.4297 L648,121.4297 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="534" y="138.4966">oar has a special</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="534" y="153.6294">shell: oarsh_shell</text><path d="M403,175.6953 L403,230.6953 L582,230.6953 L582,185.6953 L572,175.6953 L403,175.6953 " fill="#FBFB77" filter="url(#fvcccani4ni30)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M572,175.6953 L572,185.6953 L582,185.6953 L572,175.6953 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="409" y="192.7622">the sshd server must</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="409" y="207.895">be configured to accept</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="409" y="223.0278">oar related env variables</text><polygon fill="#A80036" points="212.5,257.2266,222.5,261.2266,212.5,265.2266,216.5,261.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="105.5" x2="218.5" y1="261.2266" y2="261.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="112.5" y="256.1606">server prologue</text><polygon fill="#A80036" points="116.5,271.2266,106.5,275.2266,116.5,279.2266,112.5,275.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="110.5" x2="228.5" y1="275.2266" y2="275.2266"/><polygon fill="#A80036" points="583.5,300.3594,593.5,304.3594,583.5,308.3594,587.5,304.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499.5" x2="589.5" y1="304.3594" y2="304.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="506.5" y="299.2935">oarsh_shell</text><polygon fill="#A80036" points="477.5,329.4922,487.5,333.4922,477.5,337.4922,481.5,333.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="105.5" x2="483.5" y1="333.4922" y2="333.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="112.5" y="328.4263">job_resource_manager_cgroups "init"</text><polygon fill="#A80036" points="583.5,358.625,593.5,362.625,583.5,366.625,587.5,362.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499.5" x2="589.5" y1="362.625" y2="362.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="506.5" y="357.5591">oarsh_shell</text><path d="M539,375.625 L539,415.625 L648,415.625 L648,385.625 L638,375.625 L539,375.625 " fill="#FBFB77" filter="url(#fvcccani4ni30)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M638,375.625 L638,385.625 L648,385.625 L638,375.625 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="545" y="392.6919">create cpuset</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="545" y="407.8247">for the job</text><polygon fill="#A80036" points="477.5,442.0234,487.5,446.0234,477.5,450.0234,481.5,446.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="105.5" x2="483.5" y1="446.0234" y2="446.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="112.5" y="440.9575">launch_oarexec</text><polygon fill="#A80036" points="583.5,471.1563,593.5,475.1563,583.5,479.1563,587.5,475.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499.5" x2="589.5" y1="475.1563" y2="475.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="506.5" y="470.0903">oarsh_shell</text><path d="M566,488.1563 L566,573.1563 L842,573.1563 L842,498.1563 L832,488.1563 L566,488.1563 " fill="#FBFB77" filter="url(#fvcccani4ni30)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M832,488.1563 L832,498.1563 L842,498.1563 L832,488.1563 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="588.25" y="505.2231">with the environment</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="588.25" y="520.356">variable OAR_CPUSET</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="588.25" y="535.4888">the shell used by oar (oarsh_shell)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="588.25" y="550.6216">becomes the job's user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="588.25" y="565.7544">and migrates itself to the cpuset</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="595.5" x2="637.5" y1="603.9531" y2="603.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637.5" x2="637.5" y1="603.9531" y2="616.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="596.5" x2="637.5" y1="616.9531" y2="616.9531"/><polygon fill="#A80036" points="606.5,612.9531,596.5,616.9531,606.5,620.9531,602.5,616.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="602.5" y="598.8872">Migrate itself to $OAR_CPUSET</text><path d="M554,631.9531 L698,631.9531 L698,638.9531 L688,648.9531 L554,648.9531 L554,631.9531 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="179.6641" style="stroke: #000000; stroke-width: 2.0;" width="715" x="554" y="631.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="569" y="645.02">Inside cpuset</text><polygon fill="#A80036" points="802.5,666.2188,812.5,670.2188,802.5,674.2188,806.5,670.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595.5" x2="808.5" y1="670.2188" y2="670.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="602.5" y="665.1528">Become user $OAR_JOB_USER</text><polygon fill="#A80036" points="905,680.2188,915,684.2188,905,688.2188,909,684.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="814.5" x2="911" y1="684.2188" y2="684.2188"/><polygon fill="#A80036" points="1078,709.3516,1088,713.3516,1078,717.3516,1082,713.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="927" x2="1084" y1="713.3516" y2="713.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="934" y="708.2856">execute job's prologue</text><polygon fill="#A80036" points="938,723.3516,928,727.3516,938,731.3516,934,727.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="932" x2="1094" y1="727.3516" y2="727.3516"/><polygon fill="#FBFB77" filter="url(#fvcccani4ni30)" points="879,740.3516,964,740.3516,974,751.3516,964,763.3516,879,763.3516,869,751.3516,879,740.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="881" y="756.4185">job executes</text><polygon fill="#A80036" points="1191,785.6172,1201,789.6172,1191,793.6172,1195,789.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="927" x2="1197" y1="789.6172" y2="789.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="934" y="784.5513">execute job's epilogue</text><polygon fill="#A80036" points="933,799.6172,923,803.6172,933,807.6172,929,803.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="927" x2="1207" y1="803.6172" y2="803.6172"/><polygon fill="#A80036" points="477.5,835.75,487.5,839.75,477.5,843.75,481.5,839.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39" x2="483.5" y1="839.75" y2="839.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="253" x="46" y="834.6841">job_resource_manager_cgroups "clean"</text><polygon fill="#A80036" points="583.5,864.8828,593.5,868.8828,583.5,872.8828,587.5,868.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499.5" x2="589.5" y1="868.8828" y2="868.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="506.5" y="863.8169">oarsh_shell</text><polygon fill="#A80036" points="348.5,894.0156,358.5,898.0156,348.5,902.0156,352.5,898.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39" x2="354.5" y1="898.0156" y2="898.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="46" y="892.9497">server epilogue</text><polygon fill="#A80036" points="45,908.0156,35,912.0156,45,916.0156,41,912.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="39" x2="364.5" y1="912.0156" y2="912.0156"/><!--MD5=[5e21edfdf0afec10a7227ad05529d94b]
@startuml
box "Server" #LightBlue
  participant Leon as leon
  participant Bipbip as bipbip
  control "Server's prologue" as sprologue
  control "Server's epilogue" as sepilogue
end box
box "Head Node" #LightGreen
  control "dedicated sshd" as sshd
  actor "oar user" as oar
  actor "job user" as user
  control "OAREXEC process" as OAREXEC
  control "Job's prologue" as prologue
  control "Job's epilogue" as epilogue
end box
note over oar
  oar has a special
  shell: oarsh_shell
end note

note over sshd
  the sshd server must
  be configured to accept
  oar related env variables
end note

bipbip++
sshd++

bipbip -> sprologue : server prologue
sprologue++
bipbip <- sprologue
sprologue- -

sshd - -> oar : oarsh_shell

bipbip -> sshd : job_resource_manager_cgroups "init"
sshd - -> oar : oarsh_shell
note over oar
  create cpuset
  for the job
end note

bipbip -> sshd : launch_oarexec

sshd - -> oar : oarsh_shell
note over oar, user
  with the environment
  variable OAR_CPUSET
  the shell used by oar (oarsh_shell)
  becomes the job's user
  and migrates itself to the cpuset
end note

oar -> oar: Migrate itself to $OAR_CPUSET
group Inside cpuset
  oar -> user: Become user $OAR_JOB_USER
  user -> OAREXEC
  OAREXEC++
  OAREXEC -> prologue: execute job's prologue
  prologue++
  OAREXEC <- prologue
  prologue- -

  hnote over OAREXEC
    job executes
  end hnote

  ' Job terminated
  OAREXEC -> epilogue: execute job's epilogue
  epilogue++
  OAREXEC <- epilogue
  epilogue- -
  OAREXEC- -
end


activate leon
leon -> sshd : job_resource_manager_cgroups "clean"
sshd - -> oar : oarsh_shell

leon -> sepilogue : server epilogue
sepilogue++
leon <- sepilogue
sepilogue- -
leon- -

@endumlgo

@startuml
box "Server" #LightBlue
  participant Leon as leon
  participant Bipbip as bipbip
  control "Server's prologue" as sprologue
  control "Server's epilogue" as sepilogue
end box
box "Head Node" #LightGreen
  control "dedicated sshd" as sshd
  actor "oar user" as oar
  actor "job user" as user
  control "OAREXEC process" as OAREXEC
  control "Job's prologue" as prologue
  control "Job's epilogue" as epilogue
end box
note over oar
  oar has a special
  shell: oarsh_shell
end note

note over sshd
  the sshd server must
  be configured to accept
  oar related env variables
end note

bipbip++
sshd++

bipbip -> sprologue : server prologue
sprologue++
bipbip <- sprologue
sprologue- -

sshd - -> oar : oarsh_shell

bipbip -> sshd : job_resource_manager_cgroups "init"
sshd - -> oar : oarsh_shell
note over oar
  create cpuset
  for the job
end note

bipbip -> sshd : launch_oarexec

sshd - -> oar : oarsh_shell
note over oar, user
  with the environment
  variable OAR_CPUSET
  the shell used by oar (oarsh_shell)
  becomes the job's user
  and migrates itself to the cpuset
end note

oar -> oar: Migrate itself to $OAR_CPUSET
group Inside cpuset
  oar -> user: Become user $OAR_JOB_USER
  user -> OAREXEC
  OAREXEC++
  OAREXEC -> prologue: execute job's prologue
  prologue++
  OAREXEC <- prologue
  prologue- -

  hnote over OAREXEC
    job executes
  end hnote

  OAREXEC -> epilogue: execute job's epilogue
  epilogue++
  OAREXEC <- epilogue
  epilogue- -
  OAREXEC- -
end


activate leon
leon -> sshd : job_resource_manager_cgroups "clean"
sshd - -> oar : oarsh_shell

leon -> sepilogue : server epilogue
sepilogue++
leon <- sepilogue
sepilogue- -
leon- -

@endumlgo

PlantUML version 1.2020.16(Sun Aug 23 22:20:43 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>